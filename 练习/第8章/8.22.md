8.22 编写`Unix system`函数的你自己的版本
```c
int mysystem(char *command);
```  
`mysystem`函数通过调用`"/bin/sh-c command"`来执行`command`, 然后在`command`完成后返回。
如果`command`（通过调用`exit`函数或者执行一条`return`语句）正常退出，那么`mysystem`返回`command`退出状态。例如，如果`command`通过调用`exit(8)` 终止，那么`mysystem`返回值`8`。否则，如果`command`是异常终止的，那么`mysystem`就返回`shell`返回的状态。

1. 在父进程中返回状态，在子进程中执行execve  
```c
void handler(int sig) { /* SIGINT handler */
    int olderrno = errno;
    int status;
    while ((pid = waitpid(-1, &status, 0)) > 0 { /* Reap a zombie child*/

    }

    errno = olderrno;
}

int mystem(char *command) {
    int status;
    pid_t pid;

    if ((pid = Fork()) == 0) {
        char *argv[] = {"/bin/sh","-c","ls",NULL}; 
        
        if (execve(argv[0],argv,NULL) < 0) {
            fprintf(stderr,"%s: Command not found.\n",command);
        }
    }
    Signal(SIGCHLD,handler);
    /*command正常退出*/
    if ((waitpid(pid, &status, WUNTRACED) > 0)
        if (WIFEXITED(status)) 
            return WEXITSTATUS(status);
}
```